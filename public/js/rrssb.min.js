!function(d,m,u){"use strict";var h={calc:!1};m.fn.rrssb=function(t){var e=m.extend({description:u,emailAddress:u,emailBody:u,emailSubject:u,image:u,title:u,url:u},t);for(var s in e.emailSubject=e.emailSubject||e.title,e.emailBody=e.emailBody||(e.description?e.description:"")+(e.url?"\n\n"+e.url:""),e)e.hasOwnProperty(s)&&e[s]!==u&&(e[s]=i(e[s]));e.url!==u&&(m(this).find(".rrssb-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+e.url),m(this).find(".rrssb-tumblr a").attr("href","http://tumblr.com/share/link?url="+e.url+(e.title!==u?"&name="+e.title:"")+(e.description!==u?"&description="+e.description:"")),m(this).find(".rrssb-linkedin a").attr("href","http://www.linkedin.com/shareArticle?mini=true&url="+e.url+(e.title!==u?"&title="+e.title:"")+(e.description!==u?"&summary="+e.description:"")),m(this).find(".rrssb-twitter a").attr("href","https://twitter.com/intent/tweet?text="+(e.description!==u?e.description:"")+"%20"+e.url),m(this).find(".rrssb-hackernews a").attr("href","https://news.ycombinator.com/submitlink?u="+e.url+(e.title!==u?"&text="+e.title:"")),m(this).find(".rrssb-vk a").attr("href","https://vk.com/share.php?url="+e.url),m(this).find(".rrssb-reddit a").attr("href","http://www.reddit.com/submit?url="+e.url+(e.description!==u?"&text="+e.description:"")+(e.title!==u?"&title="+e.title:"")),m(this).find(".rrssb-googleplus a").attr("href","https://plus.google.com/share?url="+e.url),m(this).find(".rrssb-pinterest a").attr("href","http://pinterest.com/pin/create/button/?url="+e.url+(e.image!==u?"&amp;media="+e.image:"")+(e.description!==u?"&description="+e.description:"")),m(this).find(".rrssb-pocket a").attr("href","https://getpocket.com/save?url="+e.url),m(this).find(".rrssb-github a").attr("href",e.url),m(this).find(".rrssb-print a").attr("href","javascript:window.print()"),m(this).find(".rrssb-whatsapp a").attr("href","whatsapp://send?text="+(e.description!==u?e.description+"%20":e.title!==u?e.title+"%20":"")+e.url)),(e.emailAddress!==u||e.emailSubject)&&m(this).find(".rrssb-email a").attr("href","mailto:"+(e.emailAddress?e.emailAddress:"")+"?"+(e.emailSubject!==u?"subject="+e.emailSubject:"")+(e.emailBody!==u?"&body="+e.emailBody:""))};var r,i=function(t){if(t!==u&&null!==t){if(null===t.match(/%[0-9a-f]{2}/i))return encodeURIComponent(t);t=decodeURIComponent(t),i(t)}},f=function(){m(".rrssb-buttons").each(function(t){var e=m(this),s=m("li:visible",e),r=100/s.length;s.css("width",r+"%").attr("data-initwidth",r)})},e=function(t){m(".rrssb-buttons").each(function(t){var e=m(this),a=m("li",e);m(a.get().reverse()).each(function(t,e){var s=m(this);if(!1===s.hasClass("small")){var r=parseFloat(s.attr("data-size"))+55;if(parseFloat(s.width())<r){var i=a.not(".small").last();m(i).addClass("small"),c()}}--e||m(".rrssb-buttons").each(function(t){var e=m(this),s=m("li",e),r=s.filter(".small"),i=0,a=0,n=r.eq(0),l=parseFloat(n.attr("data-size"))+55,o=r.length;o===s.length?42*o+l<e.width()&&(e.removeClass("small-format"),r.eq(0).removeClass("small"),c()):(s.not(".small").each(function(t){var e=m(this),s=parseFloat(e.attr("data-size"))+55,r=parseFloat(e.width());i+=r,a+=s}),l<i-a&&(n.removeClass("small"),c()))})})}),!0===t&&s(c)},c=function(){m(".rrssb-buttons").each(function(t){var e,s,r,i,a,n=m(this),l=m("li",n),o=l.filter(".small"),c=o.length;0<c&&c!==l.length?(n.removeClass("small-format"),o.css("width","42px"),r=42*c,s=100/(e=l.not(".small").length),a=r/e,!1===h.calc?(i=(n.innerWidth()-1)/e-a,i=Math.floor(1e3*i)/1e3,i+="px"):i=h.calc+"("+s+"% - "+a+"px)",l.not(".small").css("width",i)):(c===l.length?n.addClass("small-format"):n.removeClass("small-format"),f())}),m(".rrssb-buttons").each(function(t){var e=m(this),s=e.width(),r=m("li",e).not(".small").eq(0).width(),i=m("li.small",e).length;if(170<r&&i<1){e.addClass("large-format");var a=r/12+"px";e.css("font-size",a)}else e.removeClass("large-format"),e.css("font-size","");s<25*i?e.removeClass("small-format").addClass("tiny-format"):e.removeClass("tiny-format")})},t=function(){m(".rrssb-buttons").each(function(t){m(this).addClass("rrssb-"+(t+1))}),function(){var t=m("<div>"),e=["calc","-webkit-calc","-moz-calc"];m("body").append(t);for(var s=0;s<e.length;s++)if(t.css("width",e[s]+"(1px)"),1===t.width()){h.calc=e[s];break}t.remove()}(),f(),m(".rrssb-buttons li .rrssb-text").each(function(t){var e=m(this),s=e.width();e.closest("li").attr("data-size",s)}),e(!0)},s=function(t){m(".rrssb-buttons li.small").removeClass("small"),e(),t()},a=(r={},function(t,e,s){s||(s="Don't call this twice without a uniqueId"),r[s]&&clearTimeout(r[s]),r[s]=setTimeout(t,e)});m(document).ready(function(){try{m(document).on("click",".rrssb-buttons a.popup",{},function(t){var e,s,r,i,a,n,l,o,c,h=m(this);e=h.attr("href"),s=h.find(".rrssb-text").html(),r=580,i=470,a=d.screenLeft!==u?d.screenLeft:screen.left,n=d.screenTop!==u?d.screenTop:screen.top,l=(d.innerWidth?d.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-r/2+a,o=(d.innerHeight?d.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/3-i/3+n,(c=d.open(e,s,"scrollbars=yes, width="+r+", height="+i+", top="+o+", left="+l))&&c.focus&&c.focus(),t.preventDefault()})}catch(t){}m(d).resize(function(){s(c),a(function(){s(c)},200,"finished resizing")}),t()}),d.rrssbInit=t}(window,jQuery);